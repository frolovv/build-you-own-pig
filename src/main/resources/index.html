<!DOCTYPE html>
<html>
<head>
    <title>Build you own Pig!</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/datepicker.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-datepicker.js"></script>
</head>
<body>

<script>
    $(function() {

        $("#pig-area").hide();

        $('#build-pig').click(function(event) {
            $("#pig-area").show();
            var request = $("#user-selection").serialize();
            $(document).trigger("fetch-pig-script", request );
            return false;
        });

        $('#clear-pig-area').click(function(event){
            $("#pig-script-area").html("");
        });

        $(document).bind("fetch-pig-script", null, function(event, request) {
            $.getJSON("/pig-factory?" + request, function(data) {
                $(document).trigger("pig-is-ready", data);
            });
        });

        $(document).bind("pig-is-ready", null, function(event, data) {
            $("#pig-script-area").html("");
            $("#pig-script-area").append(data.pig);
        });

        $("#startDate").datepicker();
        $("#endDate").datepicker();
    });
</script>

<div class="container">

    <div class="row" id="hello" name="hello">
        <div class="span12">
            <h1>Build you own Pig!</h1>
        </div>
    </div>

    <div class="row" id="wql-form" name="wql-form">
        <div class="span12">
        <form action="#" method="get" class="form-horizontal" id="user-selection" name="user-selection">
            <div class="control-group">
                    <textarea class="span11" rows="10" cols="250" id="wql" name="wql"></textarea>
            </div>
            <div class="control-group">
                <div class="controls">
                    <button type="submit" class="btn btn-primary" id="build-pig" name="build-pig">Build Pig</button>
                    <button type="reset" class="btn" id="clear-pig-area" name="clear-pig-area">Clear Pig</button>
                </div>
            </div>
        </form>
        </div>
    </div>


    <div class="row" id="pig-area" name="pig-area">
        <div class="control-group span12">
            <textarea class="span11" rows="10" cols="250" id="pig-script-area" name="pig-script-area"></textarea>
        </div>
    </div>
</div>

</body>
</html>